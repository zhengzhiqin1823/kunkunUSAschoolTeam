<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link type="text/css" rel="stylesheet" href="./css/submit.css">
    <link type="text/css" rel="stylesheet" href="./css/demo-button1.css">
    <link type="text/css" rel="stylesheet" href="./css/demo-input1.css">
    <link type="text/css" rel="stylesheet" href="./css/demo-navigation.css">
    <script src="scripts/demo-navigation1.js"></script>
    <script type="text/javascript" src="./scripts/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
<div class="demo-navigation1">
    <nav>
        <ul>
            <li onclick="Home_click()">Home</li>
            <li onclick="Messages_click()">Messages</li>
            <li onclick="Projects_click()">Projects</li>
            <li onclick="Submits_click()">Submits</li>
            <li onclick="Personal_click()">Personal</li>
        </ul>
    </nav>
</div>

<div class="body">
    <div class="body_mid">
        <ul>
            <p><strong>项目名称：</strong>关于你干嘛的深入研究</p>
            <p><strong>提交内容：</strong></p>
        </ul>
        <textarea class="demo-textarea" v-model="report_text"></textarea>
        <div class="button">
            <button class="demo-button1" type="button" @click="cache">暂存</button>
            <button class="demo-button1" type="button" @click="submit">提交</button>
        </div>
    </div>
    <script>
        var app = new Vue({
            el: '.body_mid',
            data: {
                submitID:'',
                report_text: '请在这里输入内容...',
                upath: ""
            },
            methods: {
                submit: function () {
                    alert("submit!")
                    this.post_data()
                },
                cache: function () {
                    alert("cache!")
                    this.post_cache()
                },

                //上传文件函数
                upload: function () {
                    var zipFormData = new FormData();
                    zipFormData.append('filename', this.upath); //filename是键，file是值，就是要传的文件，test.zip是要传的文件名
                    let config = {headers: {'Content-Type': 'multipart/form-data'}};
                    this.uping = 1;
                    this.$http.post('http://localhost:42565/home/up', zipFormData, config).then(function (response) {
                        console.log(response);
                        console.log(response.data);
                        console.log(response.bodyText);
                        var resultobj = response.data;
                        this.uping = 0;
                        this.result = resultobj.msg;
                    })
                },

                //    post上传数据
                post_data: function () {
                    let data = {
                        'type':"data",
                        'submitID':this.submitID,
                        'text': this.report_text
                    }
                    axios({
                        method: "post",
                        url: "/0628JavaWebExercise_war/submit",
                        data
                    }).then((res) => {
                        alert(res.toString())
                    })
                },
                post_cache: function () {
                    let data = {
                        'type':"cache",
                        'submitID':this.submitID,
                        'text': this.report_text
                    }
                    this.$axios
                        .post('/0628JavaWebExercise_war/cache', data)
                        .then((res) => {
                            alert(res.toString())
                        })
                }
            }
        })

    </script>
</div>

</body>
</html>
